# Configuration Guide

Detailed guide to Hyprland configuration structure and how HyprDisplays/HyprSettings integrate with your configs.

**[← Back to Main README](README.md)**

---

## Table of Contents

- [Configuration File Structure](#configuration-file-structure)
- [HyprSettings Integration](#hyprsettings-integration)
- [HyprDisplays Integration](#hyprdisplays-integration)
- [Manual Editing](#manual-editing)
- [Best Practices](#best-practices)
- [Troubleshooting](#troubleshooting)

---

## Configuration File Structure

### Standard Hyprland Layout

```
~/.config/hypr/
├── custom/                    ← Custom config directory
│   ├── env.conf              ← Environment variables
│   ├── execs.conf            ← Autostart programs
│   ├── general.conf          ← General settings
│   ├── keybinds.conf         ← Keyboard shortcuts
│   ├── rules.conf            ← Window rules
│   └── scripts/
├── hyprland/                  ← Alternative config directory
│   ├── colors.conf           ← Color definitions
│   ├── env.conf              ← Environment variables
│   ├── execs.conf            ← Autostart programs
│   ├── general.conf          ← General settings
│   ├── keybinds.conf         ← Keyboard shortcuts
│   ├── rules.conf            ← Window rules
│   └── scripts/
├── hyprland.conf              ← Main config file
├── monitors.conf              ← Display config (HyprDisplays)
└── workspaces.conf            ← Workspace rules
```

### Main Config File

Your `hyprland.conf` typically sources other config files:

```bash
# Main Hyprland configuration

# Source display configuration
source = ~/.config/hypr/monitors.conf

# Source general settings
source = ~/.config/hypr/hyprland/general.conf
# or
source = ~/.config/hypr/custom/general.conf

# Source environment variables
source = ~/.config/hypr/hyprland/env.conf

# Source keybinds
source = ~/.config/hypr/hyprland/keybinds.conf

# Source rules
source = ~/.config/hypr/hyprland/rules.conf

# Source autostart
source = ~/.config/hypr/hyprland/execs.conf

# Source workspaces
source = ~/.config/hypr/workspaces.conf
```

---

## HyprSettings Integration

### How HyprSettings Finds Configs

HyprSettings automatically detects your config structure:

1. **Checks `hyprland/` directory first** for each config file
2. **Falls back to `custom/` directory** if not found in `hyprland/`
3. **Creates files if missing** when you make changes

### Files HyprSettings Manages

| File              | Category             | What It Controls                  |
| ----------------- | -------------------- | --------------------------------- |
| `general.conf`    | General & Animations | Borders, gaps, animations, layout |
| `env.conf`        | Environment          | Environment variables             |
| `execs.conf`      | Autostart            | Programs to run on startup        |
| `keybinds.conf`   | Keybinds             | Keyboard shortcuts                |
| `rules.conf`      | Rules                | Window rules and behavior         |
| `workspaces.conf` | Workspaces           | Workspace configuration           |

### Config File Format

HyprSettings can parse and edit standard Hyprland config syntax:

```conf
# General settings
general {
    border_size = 2
    gaps_in = 5
    gaps_out = 10
    col.active_border = rgba(33ccffee)
    col.inactive_border = rgba(595959aa)
    layout = dwindle
    pseudotile = false
}

# Animations
animations {
    enabled = true

    animation = windows, 1, 7, default
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

# Input settings
input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =

    follow_mouse = 1
    sensitivity = 0.0

    touchpad {
        natural_scroll = true
        tap-to-click = true
    }
}
```

### How Editing Works

**For Simple Settings (General, Animations, Input):**

- GUI provides spinners, switches, and dropdowns
- Changes are validated before saving
- Config file is updated with new values
- Comments and formatting are preserved

**For Complex Settings (Keybinds, Rules, Workspaces):**

- Full text editor provided
- Edit raw config syntax
- Changes save on edit
- Syntax errors shown via `hyprctl reload` output

### Live Reload

After making changes, HyprSettings runs:

```bash
hyprctl reload
```

This reloads your Hyprland configuration without restarting the compositor.

---

## HyprDisplays Integration

### Monitor Configuration File

HyprDisplays manages `~/.config/hypr/monitors.conf`:

```conf
# Monitor configuration generated by HyprDisplays
monitor = HDMI-A-1, 1920x1080@60, 0x0, 1.0
monitor = eDP-1, 1920x1080@144, 1920x0, 1.0
```

### Configuration Profiles

HyprDisplays also maintains `~/.config/hypr/hyprdisplays_profiles.json`:

```json
{
  "profiles": [
    {
      "fingerprint": "HDMI-A-1|Dell|U2415|ABC123;;eDP-1|AU Optronics|...",
      "timestamp": "2025-12-10T12:00:00",
      "monitor_count": 2,
      "monitors": {
        "HDMI-A-1": {
          "enabled": true,
          "width": 1920,
          "height": 1080,
          "refresh": 60,
          "x": 0,
          "y": 0,
          "scale": 1.0,
          "transform": 0,
          "primary": false,
          "make": "Dell",
          "model": "U2415",
          "serial": "ABC123"
        },
        "eDP-1": {
          "enabled": true,
          "width": 1920,
          "height": 1080,
          "refresh": 144,
          "x": 1920,
          "y": 0,
          "scale": 1.0,
          "transform": 0,
          "primary": true,
          "make": "AU Optronics",
          "model": "0xD1ED",
          "serial": ""
        }
      }
    }
  ]
}
```

This file:

- Stores multiple monitor configurations
- Uses physical monitor details for identification
- Enables automatic configuration switching
- Maintains up to 50 recent configurations

### How It Works

1. **User configures displays** in HyprDisplays GUI
2. **Clicks "Apply & Save"**
3. **HyprDisplays:**
   - Writes current config to `monitors.conf`
   - Gets physical details of all monitors
   - Creates fingerprint from monitor combination
   - Saves configuration to profiles JSON
4. **Later, when monitors connect:**
   - HyprDisplays (or daemon) detects change
   - Creates fingerprint of current monitors
   - Matches against saved profiles
   - Applies configuration if found
   - Updates `monitors.conf`

---

## Manual Editing

### You Can Still Edit Manually!

Both HyprSettings and HyprDisplays are designed to work alongside manual editing:

**HyprSettings:**

- ✓ Preserves comments in config files
- ✓ Maintains formatting
- ✓ Only updates values it manages
- ✓ Doesn't touch other sections

**HyprDisplays:**

- ✓ Completely regenerates `monitors.conf`
- ✓ Profiles stored separately in JSON
- ✓ Manual edits to `monitors.conf` are overwritten on save
- ✓ Use GUI for monitor config, manual editing for everything else

### Opening Configs in Text Editor

**From HyprSettings:**
Click "Open Config Folder" button to open `~/.config/hypr/` in your file manager.

**From Terminal:**

```bash
# Open config directory
cd ~/.config/hypr

# Edit specific file
$EDITOR hyprland.conf
$EDITOR hyprland/general.conf
$EDITOR monitors.conf

# Or use your preferred editor
nano hyprland.conf
vim hyprland.conf
code ~/.config/hypr
```

### Mixing GUI and Manual Editing

**Recommended Workflow:**

1. **Use HyprSettings for:** Borders, gaps, animations, input settings
2. **Use text editor for:** Complex keybinds, advanced rules, custom configs
3. **Use HyprDisplays for:** All monitor configuration
4. **Test changes:** Click "Reload Config" in either app

**Example:**

```bash
# Edit keybinds manually for complex setup
$EDITOR ~/.config/hypr/hyprland/keybinds.conf

# Adjust gaps with GUI
hyprsettings
# → General → Adjust gaps → Changes apply automatically

# Configure monitors with GUI
hyprdisplays
# → Position monitors → "Apply & Save"
```

### Version Control

Track your configs with git:

```bash
cd ~/.config/hypr
git init
git add .
git commit -m "Initial Hyprland config"

# After making changes with GUI or manually
git diff                    # See what changed
git add .
git commit -m "Adjusted gaps and monitor layout"
```

---

## Best Practices

### 1. Backup Configs Regularly

```bash
# Create backup
cp -r ~/.config/hypr ~/.config/hypr.backup.$(date +%Y%m%d)

# Or use git
cd ~/.config/hypr
git init
git add .
git commit -m "Config backup $(date +%Y-%m-%d)"
```

### 2. Test Before Committing

```bash
# Make changes in GUI
# Test with:
hyprctl reload

# If something breaks:
# Revert in git, or restore from backup
```

### 3. Use Comments

Both tools preserve comments, so document your configs:

```conf
# Work dual-monitor setup - Dell + laptop
general {
    gaps_in = 5      # Small gaps for more screen space
    gaps_out = 10    # Comfortable edge gaps
    border_size = 2  # Visible but not intrusive
}
```

### 4. Separate Concerns

Keep different types of config in separate files:

```
~/.config/hypr/
├── monitors.conf        ← HyprDisplays only
├── hyprland/
│   ├── general.conf    ← HyprSettings + manual
│   ├── keybinds.conf   ← Mostly manual, some HyprSettings
│   ├── rules.conf      ← Mostly manual, some HyprSettings
│   └── execs.conf      ← HyprSettings + manual
└── hyprland.conf       ← Manual only (sources other files)
```

### 5. Check Hyprland Logs

If reload fails:

```bash
# View logs
hyprctl logs

# Or check systemd journal
journalctl --user -u hyprland -n 50
```

### 6. Validate Syntax

Before making major changes:

```bash
# Test current config
hyprctl reload

# If successful, make changes
# If errors, fix them first
```

---

## Troubleshooting

### Changes Not Applying

**Solution 1: Reload Config**

```bash
hyprctl reload
```

Or click "Reload Config" button in HyprSettings.

**Solution 2: Check Syntax**

```bash
hyprctl reload
# Look for error messages
```

**Solution 3: Check File Locations**

Make sure files exist in correct locations:

```bash
ls -la ~/.config/hypr/hyprland/
ls -la ~/.config/hypr/custom/
ls -la ~/.config/hypr/monitors.conf
```

### HyprSettings Can't Find Config Files

**Create the directories:**

```bash
mkdir -p ~/.config/hypr/hyprland
mkdir -p ~/.config/hypr/custom
```

**Or let HyprSettings create them:**

1. Open HyprSettings
2. Navigate to any category
3. Make a change
4. File is automatically created

### Monitor Config Not Persisting

**Check monitors.conf is sourced:**

In `~/.config/hypr/hyprland.conf`:

```bash
source = ~/.config/hypr/monitors.conf
```

**Verify monitors.conf exists:**

```bash
cat ~/.config/hypr/monitors.conf
```

### Profiles Not Auto-Loading

**Check profile file exists:**

```bash
cat ~/.config/hypr/hyprdisplays_profiles.json
```

**Verify you saved the configuration:**

1. Open HyprDisplays
2. Check status bar for "Saved config available" message
3. If not, configure and click "Apply & Save"

**Check daemon is running (if using):**

```bash
systemctl --user status hyprdisplays-daemon
```

### Conflicts Between Tools

**HyprDisplays and HyprSettings don't conflict!**

- HyprDisplays: Manages `monitors.conf` only
- HyprSettings: Manages other config files

**If you think there's a conflict:**

1. Check which file has the issue:

   ```bash
   cat ~/.config/hypr/monitors.conf
   cat ~/.config/hypr/hyprland/general.conf
   ```

2. Verify correct tool is editing correct file:
   - Display settings → Use HyprDisplays
   - Everything else → Use HyprSettings or manual editing

### Manual Edits Overwritten

**HyprDisplays:**

- **Always** overwrites `monitors.conf` when you click "Apply & Save"
- This is intentional - use HyprDisplays for all monitor config
- Don't manually edit `monitors.conf` if using HyprDisplays

**HyprSettings:**

- Preserves comments and formatting
- Only updates specific values
- Should not overwrite other settings
- If it does, please report as a bug

### Config Syntax Errors

**Check with hyprctl:**

```bash
hyprctl reload
```

**Common errors:**

```conf
# Wrong: Missing equals sign
general {
    border_size 2
}

# Right:
general {
    border_size = 2
}

# Wrong: Missing comma in color
col.active_border = rgba(33ccffee

# Right:
col.active_border = rgba(33ccffee)
```

**Fix in text editor:**

```bash
$EDITOR ~/.config/hypr/hyprland/general.conf
```

Then reload:

```bash
hyprctl reload
```

---

## Configuration Examples

### Minimal Setup

```bash
# ~/.config/hypr/hyprland.conf
source = ~/.config/hypr/monitors.conf
source = ~/.config/hypr/hyprland/general.conf
```

```conf
# ~/.config/hypr/hyprland/general.conf
general {
    border_size = 2
    gaps_in = 5
    gaps_out = 10
}

input {
    kb_layout = us
    sensitivity = 0.0
}
```

### Complete Setup

```bash
# ~/.config/hypr/hyprland.conf
# Monitor configuration (HyprDisplays)
source = ~/.config/hypr/monitors.conf

# General settings (HyprSettings)
source = ~/.config/hypr/hyprland/general.conf

# Environment variables (HyprSettings)
source = ~/.config/hypr/hyprland/env.conf

# Keybinds (Manual + HyprSettings)
source = ~/.config/hypr/hyprland/keybinds.conf

# Window rules (Manual + HyprSettings)
source = ~/.config/hypr/hyprland/rules.conf

# Autostart programs (HyprSettings)
source = ~/.config/hypr/hyprland/execs.conf

# Workspace configuration (HyprSettings)
source = ~/.config/hypr/workspaces.conf

# Colors (Manual only)
source = ~/.config/hypr/hyprland/colors.conf
```

This gives you:

- Clean separation of concerns
- Easy editing with GUI tools
- Flexibility for manual advanced config
- Version control friendly structure

---

**[← Back to Main README](README.md)**
